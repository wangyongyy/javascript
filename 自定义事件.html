<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>自定义事件</title>
	</head>
	<body>
		
		<button id="btn">点我</button>
		
		<script type="text/javascript">
			//事件三要素，事件对象，事件名，方法函数
			function addCustomEventListener(obj,eventName,fn){
				obj.events=obj.events||{};
				obj.events[eventName]=obj.events[eventName]||[];
				obj.events[eventName].push(fn);
			}
			function trigger(obj,eventName){
				//判断对象身上这个事件是否存在
				var fns=obj.events[eventName];
				if(fns){
					for(var i=0;i<fns.length;i++){
						fns[i].call(obj);
					}
				}
			}
			
			window.onload=function(){
				var btn=document.getElementById("btn");
				
				addCustomEventListener(btn,'点击',function(){
					console.log('点击了1');
				})
				addCustomEventListener(btn,'点击',function(){
					console.log('点击了2');
				})
				
				btn.onclick=function(){
					trigger(btn,'点击');
				}
				
			}
			
		</script>
		
		
	</body>
</html>
